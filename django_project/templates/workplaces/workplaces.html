{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/workplaces/workplaces.css' %}">
{% endblock %}

{% block content %}
<div class="container workplace-container">
    <h1>–†–∞–±–æ—á–∏–µ –º–µ—Å—Ç–∞</h1>

    <a href="{% url 'workplaces:add_workplace' %}" class="btn btn-primary btn-create">
        Ôºã –°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ
    </a>

    <div class="row workplaces-grid">
        {% for workplace in workplaces %}
        <div class="col-md-4 mb-3">
            <div class="workplace-card">
                <h5 class="card-title">–°—Ç–æ–ª #{{ workplace.desk_number }}</h5>

                {% if workplace.employee %}
                <div class="status-badge status-occupied">–ó–∞–Ω—è—Ç–æ</div>
                <div class="workplace-info">
                    <p><strong>üë§</strong> {{ workplace.employee|truncatechars:15 }}</p>
                    <p><strong>üéØ</strong> {{ workplace.employee.get_skills_display|truncatechars:20 }}</p>
                </div>
                {% else %}
                <div class="status-badge status-free">–°–≤–æ–±–æ–¥–Ω–æ</div>
                <p class="text-muted text-center">–ù–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</p>
                {% endif %}

                <div class="workplace-actions">
                    {% if workplace.employee %}
                    <a href="{% url 'workplaces:clear_workplace' workplace.pk %}"
                       class="btn-workplace btn-warning" title="–û—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ">
                        üóëÔ∏è –û—Å–≤–æ–±–æ–¥–∏—Ç—å
                    </a>
                    {% else %}
                    <a href="{% url 'workplaces:booking' workplace.pk %}"
                       class="btn-workplace btn-success" title="–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ">
                        ‚úÖ –ë—Ä–æ–Ω—å
                    </a>
                    {% endif %}

                    <a href="{% url 'workplaces:workplace_detail' workplace.pk %}"
                       class="btn-workplace btn-info" title="–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
                        üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>

                    <a href="{% url 'workplaces:delete_workplace' workplace.pk %}"
                       class="btn-workplace btn-danger" title="–£–¥–∞–ª–∏—Ç—å —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ">
                        ‚ùå –£–¥–∞–ª–∏—Ç—å
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="navigation-buttons">
    <a href="/" class="btn btn-secondary">
        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
    </a>
</div>
{% endblock %}