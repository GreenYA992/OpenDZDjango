{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/workplaces/workplaces.css' %}">
{% endblock %}

{% block content %}
<div class="container workplace-container">
    <h1>–†–∞–±–æ—á–∏–µ –º–µ—Å—Ç–∞</h1>

    <a href="{% url 'workplaces:add_workplace' %}" class="btn btn-primary mb-4">
        Ôºã –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ
    </a>

    <div class="row workplaces-grid">
        {% for workplace in workplaces %}
        <div class="col-md-4 mb-4">
            <div class="workplace-card">
                <h5 class="card-title">–°—Ç–æ–ª #{{ workplace.desk_number }}</h5>

                {% if workplace.employee %}
                <div class="status-badge status-occupied">–ó–∞–Ω—è—Ç–æ</div>
                <div class="workplace-info">
                    <p><strong>üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫:</strong> {{ workplace.employee }}</p>
                    <p><strong>üéØ –ù–∞–≤—ã–∫–∏:</strong> {{ workplace.employee.get_skills_display }}</p>
                    <p><strong>üìß Email:</strong> {{ workplace.employee.email }}</p>
                </div>
                {% else %}
                <div class="status-badge status-free">–°–≤–æ–±–æ–¥–Ω–æ</div>
                <p class="text-muted">–ù–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</p>
                {% endif %}

                <div class="workplace-actions">
                    {% if workplace.employee %}
                    <a href="{% url 'workplaces:clear_workplace' workplace.pk %}"
                       class="btn-workplace btn-warning">üóëÔ∏è –û—Å–≤–æ–±–æ–¥–∏—Ç—å</a>
                    {% else %}
                    <a href="{% url 'workplaces:booking' workplace.pk %}"
                       class="btn-workplace btn-success">‚úÖ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
                    {% endif %}

                    <a href="{% url 'workplaces:workplace_detail' workplace.pk %}"
                       class="btn-workplace btn-info">üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>

                    <a href="{% url 'workplaces:delete_workplace' workplace.pk %}"
                       class="btn-workplace btn-danger">‚ùå –£–¥–∞–ª–∏—Ç—å</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="navigation-buttons">
    <a href="/" class="btn btn-secondary back-btn">
        üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
    </a>
</div>
{% endblock %}